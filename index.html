<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Terra Signal ‚Äî Climate Intelligence System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      margin: 0;
      padding: 24px;
      background: #020617;
      color: #e5e7eb;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    }

    h1, h2, h3 {
      color: #7dd3fc;
    }

    section {
      background: #020617;
      border: 1px solid #1f2937;
      border-radius: 14px;
      padding: 18px;
      margin-bottom: 24px;
    }

    input, textarea, button {
      width: 100%;
      margin-top: 10px;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid #334155;
      background: #020617;
      color: #e5e7eb;
      font-size: 14px;
    }

    button {
      background: #0284c7;
      border: none;
      cursor: pointer;
      font-weight: 600;
    }

    button:hover {
      background: #0369a1;
    }

    .output {
      margin-top: 14px;
      white-space: pre-wrap;
      line-height: 1.6;
      color: #d1d5db;
    }

    .chatbox {
      max-height: 320px;
      overflow-y: auto;
      padding: 10px;
      border: 1px solid #334155;
      border-radius: 10px;
      margin-bottom: 10px;
    }

    .msg {
      margin-bottom: 10px;
    }

    .user { color: #fbbf24; }
    .ai { color: #7dd3fc; }

    .footer {
      font-size: 12px;
      color: #9ca3af;
      text-align: center;
      margin-top: 20px;
    }
  </style>
</head>

<body>

<h1>üåç Terra Signal</h1>
<p>
Terra Signal is a climate intelligence research system that synthesizes public weather data,
environmental heuristics, and transparent reasoning to assess long-term environmental stress,
hazard susceptibility, and land behavior.
</p>

<section>
  <h2>üå¶ Regional Climate Signal Analysis</h2>
  <input id="location" placeholder="Enter a city or region (e.g., Houston, TX)" />
  <button onclick="analyzeClimate()">Run Climate Analysis</button>
  <div id="climateOut" class="output"></div>
</section>

<section>
  <h2>üõ∞ Terrain & Land Surface Input</h2>
  <input type="file" accept="image/*" onchange="terrainHeuristic()" />
  <div class="output" id="terrainOut"></div>
</section>

<section>
  <h2>üí¨ Terra Signal Conversational Interface</h2>
  <div class="chatbox" id="chat"></div>
  <textarea id="chatInput" placeholder="Ask about climate risk, drought, flooding, soil behavior, or long-term trends"></textarea>
  <button onclick="sendChat()">Send</button>
</section>

<section>
  <h2>üî¨ Scientific Validation & Methodology</h2>
  <div class="output">
Terra Signal is grounded in established environmental science principles rather than opaque
black-box prediction.

Methodological Foundations:
‚Ä¢ Climate stress indicators derived from temperature maxima, precipitation accumulation, and variability
‚Ä¢ Soil behavior inferred through moisture persistence heuristics and runoff potential
‚Ä¢ Hazard susceptibility framed probabilistically, not deterministically

Data Sources:
‚Ä¢ Open-Meteo public global weather API
‚Ä¢ NOAA climate hazard frameworks
‚Ä¢ NASA Earth observation and hydrology literature

This system is designed for research, education, and exploratory environmental analysis.
It does not provide deterministic forecasts or emergency guidance.
  </div>
</section>

<section>
  <h2>üß† System Architecture (Scalable by Design)</h2>
  <div class="output">
Current Version:
‚Ä¢ Client-side reasoning
‚Ä¢ Public data ingestion
‚Ä¢ Heuristic-based environmental inference

Future Backend Expansion (Planned):
‚Ä¢ Server-side climate models
‚Ä¢ LLM-powered scientific reasoning
‚Ä¢ Image-based land classification
‚Ä¢ Longitudinal regional risk tracking

Terra Signal is architected to scale naturally from a research prototype into a
full climate intelligence platform.
  </div>
</section>

<div class="footer">
¬© Terra Signal ‚Äî Research Prototype
</div>

<script>
let latestClimate = null;

async function geocode(place) {
  const r = await fetch(
    `https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(place)}`
  );
  const j = await r.json();
  return j.results ? j.results[0] : null;
}

async function analyzeClimate() {
  const out = document.getElementById("climateOut");
  out.textContent = "Analyzing climate signals...";

  const place = document.getElementById("location").value;
  const geo = await geocode(place);
  if (!geo) {
    out.textContent = "Location not found.";
    return;
  }

  const url =
    `https://api.open-meteo.com/v1/forecast?latitude=${geo.latitude}&longitude=${geo.longitude}&daily=temperature_2m_max,precipitation_sum&timezone=auto`;

  const r = await fetch(url);
  const d = await r.json();
  latestClimate = d.daily;

  const avgTemp = mean(d.daily.temperature_2m_max);
  const avgRain = mean(d.daily.precipitation_sum);

  let signal = "Moderate environmental stress.";
  if (avgRain > 10 && avgTemp > 30) signal = "Elevated flood and heat stress risk.";
  if (avgRain < 2 && avgTemp > 32) signal = "High drought susceptibility.";

  out.textContent =
`Region: ${geo.name}, ${geo.country}
Average Max Temperature: ${avgTemp.toFixed(1)} ¬∞C
Average Precipitation: ${avgRain.toFixed(1)} mm

Environmental Signal:
${signal}

Interpretation:
Sustained temperature and precipitation patterns influence soil moisture retention,
runoff behavior, and long-term land stability.`;
}

function mean(arr) {
  return arr.reduce((a,b)=>a+b,0)/arr.length;
}

function terrainHeuristic() {
  document.getElementById("terrainOut").textContent =
`Image received.

Qualitative land interpretation:
‚Ä¢ Uniform flat regions increase runoff accumulation
‚Ä¢ Cracked or pale soil indicates prolonged dryness
‚Ä¢ Vegetation density moderates erosion and flood risk

Future versions will integrate satellite-aligned vision models.`;
}

function sendChat() {
  const chat = document.getElementById("chat");
  const input = document.getElementById("chatInput");
  const q = input.value.trim();
  if (!q) return;

  chat.innerHTML += `<div class="msg user">You: ${q}</div>`;
  input.value = "";

  let response =
"Terra Signal analysis:\n\n";

  if (latestClimate) {
    response +=
"Using recent regional climate data, I can explain how precipitation, heat, and variability interact to shape soil moisture, flood susceptibility, and drought stress.\n\n";
  }

  response +=
"This system focuses on interpretable environmental signals rather than opaque predictions. Ask about long-term trends, land behavior, or climate stress mechanisms.";

  chat.innerHTML += `<div class="msg ai">${response}</div>`;
  chat.scrollTop = chat.scrollHeight;
}
</script>

</body>
</html>
